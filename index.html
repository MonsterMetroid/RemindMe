<!DOCTYPE html>
<html>

<head>
     <!-- minified jquery cdn -->
     <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
     <!-- minified bootstrap theme -->
     <link rel="stylesheet" type="text/css" href="bsTheme.css">
     <!-- <script src="https://cdn.firebase.com/libs/firebaseui/2.0.0/firebaseui.js"></script> -->
     <!-- 
<link type="text/css" rel="stylesheet" src="https://cdn.firebase.com/libs/firebaseui/2.0.0/firebaseui.css" />
<script src="node_modules/firebaseui/dist/firebaseui.js"></script>
<link type="text/css" rel="stylesheet" href="node_modules/firebaseui/dist/firebaseui.css" /> -->
     <title>test</title>
</head>

<body>
     <div class="container">
          <div class="row">
               <div class="col-md-4">
                    <div class="panel-body">
                         <!-- form to submit data -->
                         <div>
                              <div class="form-group" id="formText">
                                   <label for="email-input" >Email address:</label>
                                   <input class="form-control" id="email-input" type="text" placeholder="randomRachel@yourMail.com">
                              </div>
                              <div class="form-group" id="formText1">
                                   <label for="password-input">Password</label>
                                   <input class="form-control" id="password-input" type="text" placeholder="your password here">
                              </div>
                              <br>
                              <div class="col-md-3">
                                   <button class="btn btn-primary" id="login-button" type="submit">Login</button>
                              </div>
                              <div class="col-md-3">
                                   <button class="btn btn-secondary" id="signup-button" type="submit">Signup</button>
                              </div>
                              <div class="col-md-3">
                                   <button class="btn btn-primary pull-right" id="logout-button" type="submit">Logout
                                   </button>
                              </div>
                              <div class="row">
                                   <div class="col-md-4">
                                        <button class="btn btn-primary" id="login-with-google-button" type="submit">Login With Google
                                        </button>
                                   </div>
                                   <div id="facebook-status"></div>
                              </div>
                              

                         </div>
                    </div>
               </div>
               
               <script src="https://www.gstatic.com/firebasejs/4.0.0/firebase.js"></script>
               <script type="text/javascript">
               // hide logout button upon page load \\
               $("#logout-button").hide();
               // initialize and setup Facebook SDK \\
               
               // window.fbAsyncInit = function() {
               //      FB.init({
               //           appId: '435131476853178',
               //           autoLogAppEvents: true,
               //           xfbml: true,
               //           version: 'v2.9'
               //      });
               //      FB.getLoginStatus(function(response){
               //        if(response.status === 'connected') {
               //          document.getElementById('facebook-status').innerHtml = 'We Are Connected!';
               //        } else if (resposne.status === 'not_authorized') {
               //          document.getElementById('facebook-status').innerHtml = 'we are not logged in...';
               //        }
               //      })
               // };

               // (function(d, s, id) {
               //      var js, fjs = d.getElementsByTagName(s)[0];
               //      if (d.getElementById(id)) {
               //           return;
               //      }
               //      js = d.createElement(s);
               //      js.id = id;
               //      js.src = "https://connect.facebook.net/en_US/sdk.js";
               //      fjs.parentNode.insertBefore(js, fjs);
               // }(document, 'script', 'facebook-jssdk'));
           


               // Initialize Firebase
               var config = {
                    apiKey: "AIzaSyAhCyPqOp9XfEGJvb1rFdqiDbQxL_ioi9o",
                    authDomain: "remindme-ea1a5.firebaseapp.com",
                    databaseURL: "https://remindme-ea1a5.firebaseio.com",
                    projectId: "remindme-ea1a5",
                    storageBucket: "remindme-ea1a5.appspot.com",
                    messagingSenderId: "831972778332"
               };
               firebase.initializeApp(config);
               var database = firebase.database();
               var provider = new firebase.auth.GoogleAuthProvider();


               // get elements
               const txtEmail = document.getElementById('email-input');
               const txtPassword = document.getElementById('password-input');
               const loginButton = document.getElementById('login-button');
               const logoutButton = document.getElementById('logout-button');
               const signupButton = document.getElementById('signup-button');
               const loginWithGoogleButton = document.getElementById('login-with-google-button');
               // add login events \\
               loginButton.addEventListener('click', e => {

                    // show logout button \\
                    $('#logout-button').show();

                    // hide unneeded buttons
                    $('#login-button').hide();
                    $("#login-with-google-button").hide();
                    $("#signup-button").hide();
                    // get email and password \\
                    const email = txtEmail.value;
                    const password = txtPassword.value;
                    const auth = firebase.auth();

                    // sign in \\
                    const promise = auth.signInWithEmailAndPassword(email, password);

                    // clear email and password inputs \\
                    $("#email-input").val(" ");
                    $("#password-input").val(" ");

                    promise.catch(e => console.log(e.message));
               });


               signupButton.addEventListener('click', e => {
                    // show logout button \\
                    $('#logout-button').show();
                    // get email an password \\
                    const email = txtEmail.value;
                    const password = txtPassword.value;
                    const auth = firebase.auth();

                    // create user and sign user in \\
                    const promise = auth.createUserWithEmailAndPassword(email, password);

                    promise.catch(e => console.log(e.message));
               })

               loginWithGoogleButton.addEventListener('click', e => {
               
            
                console.log(provider);
                provider.addScope('profile');
                provider.addScope('email');


                firebase.auth().signinWithRedirect(provider).catch(function(error) {
                  console.log("google error", error);
                });
               })

               // add real-time listener \\
               firebase.auth().onAuthStateChanged(firebaseUser => {
                    if (firebaseUser) {
                         console.log(firebaseUser);
                         $("#email-input, #password-input, #login-button, #formText, #formText1, #login-with-google-button, #signup-button").hide();
                         $("#logout-button").show();

                    } else {
                         console.log('not logged in');
                    }
               });

               // add logout events \\
               logoutButton.addEventListener('click', e => {
                    firebase.auth().signOut();
                    $("#login-button, #email-input, #password-input, #formText1, #formText, #signup-button").show();
               })


               </script>
</body>

</html>
